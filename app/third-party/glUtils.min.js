// taken from https://github.com/mdn/webgl-examples/blob/gh-pages/tutorial/glUtils.js
function mht(a){var b="";if(16==a.length)for(var c=0;c<4;c++)b+="<span style='font-family: monospace'>["+a[4*c+0].toFixed(4)+","+a[4*c+1].toFixed(4)+","+a[4*c+2].toFixed(4)+","+a[4*c+3].toFixed(4)+"]</span><br>";else{if(9!=a.length)return a.toString();for(var c=0;c<3;c++)b+="<span style='font-family: monospace'>["+a[3*c+0].toFixed(4)+","+a[3*c+1].toFixed(4)+","+a[3*c+2].toFixed(4)+"]</font><br>"}return b}function makeLookAt(a,b,c,d,e,f,g,h,i){var j=$V([a,b,c]),k=$V([d,e,f]),l=$V([g,h,i]),n=j.subtract(k).toUnitVector(),o=l.cross(n).toUnitVector(),p=n.cross(o).toUnitVector(),q=$M([[o.e(1),o.e(2),o.e(3),0],[p.e(1),p.e(2),p.e(3),0],[n.e(1),n.e(2),n.e(3),0],[0,0,0,1]]),r=$M([[1,0,0,-a],[0,1,0,-b],[0,0,1,-c],[0,0,0,1]]);return q.x(r)}function makeOrtho(a,b,c,d,e,f){var g=-(b+a)/(b-a),h=-(d+c)/(d-c),i=-(f+e)/(f-e);return $M([[2/(b-a),0,0,g],[0,2/(d-c),0,h],[0,0,-2/(f-e),i],[0,0,0,1]])}function makePerspective(a,b,c,d){var e=c*Math.tan(a*Math.PI/360),f=-e,g=f*b,h=e*b;return makeFrustum(g,h,f,e,c,d)}function makeFrustum(a,b,c,d,e,f){var g=2*e/(b-a),h=2*e/(d-c),i=(b+a)/(b-a),j=(d+c)/(d-c),k=-(f+e)/(f-e),l=-2*f*e/(f-e);return $M([[g,0,i,0],[0,h,j,0],[0,0,k,l],[0,0,-1,0]])}function makeOrtho(a,b,c,d,e,f){var g=-(b+a)/(b-a),h=-(d+c)/(d-c),i=-(f+e)/(f-e);return $M([[2/(b-a),0,0,g],[0,2/(d-c),0,h],[0,0,-2/(f-e),i],[0,0,0,1]])}Matrix.Translation=function(a){if(2==a.elements.length){var b=Matrix.I(3);return b.elements[2][0]=a.elements[0],b.elements[2][1]=a.elements[1],b}if(3==a.elements.length){var b=Matrix.I(4);return b.elements[0][3]=a.elements[0],b.elements[1][3]=a.elements[1],b.elements[2][3]=a.elements[2],b}throw"Invalid length for Translation"},Matrix.prototype.flatten=function(){var a=[];if(0==this.elements.length)return[];for(var b=0;b<this.elements[0].length;b++)for(var c=0;c<this.elements.length;c++)a.push(this.elements[c][b]);return a},Matrix.prototype.ensure4x4=function(){if(4==this.elements.length&&4==this.elements[0].length)return this;if(this.elements.length>4||this.elements[0].length>4)return null;for(var a=0;a<this.elements.length;a++)for(var b=this.elements[a].length;b<4;b++)a==b?this.elements[a].push(1):this.elements[a].push(0);for(var a=this.elements.length;a<4;a++)0==a?this.elements.push([1,0,0,0]):1==a?this.elements.push([0,1,0,0]):2==a?this.elements.push([0,0,1,0]):3==a&&this.elements.push([0,0,0,1]);return this},Matrix.prototype.make3x3=function(){return 4!=this.elements.length||4!=this.elements[0].length?null:Matrix.create([[this.elements[0][0],this.elements[0][1],this.elements[0][2]],[this.elements[1][0],this.elements[1][1],this.elements[1][2]],[this.elements[2][0],this.elements[2][1],this.elements[2][2]]])},Vector.prototype.flatten=function(){return this.elements};